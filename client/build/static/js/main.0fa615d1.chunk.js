(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{169:function(e,t,a){"use strict";a.r(t);var r={};a.r(r),a.d(r,"loginUser",function(){return D}),a.d(r,"createNewUser",function(){return U}),a.d(r,"userLogOut",function(){return $}),a.d(r,"formInput",function(){return V}),a.d(r,"formError",function(){return z}),a.d(r,"formClear",function(){return H}),a.d(r,"modalControl",function(){return K}),a.d(r,"roomSelect",function(){return _}),a.d(r,"loadUserTest",function(){return q}),a.d(r,"loadNewWord",function(){return F}),a.d(r,"initRound",function(){return G}),a.d(r,"addToWordList",function(){return Y}),a.d(r,"sendWordList",function(){return J}),a.d(r,"endRound",function(){return Q}),a.d(r,"addRoundWordCount",function(){return X}),a.d(r,"sendPauseEvent",function(){return Z}),a.d(r,"editWordInCache",function(){return ee}),a.d(r,"loadUserTestBeta",function(){return te}),a.d(r,"loadExpBetaWords",function(){return ae}),a.d(r,"sendRelationWords",function(){return re});a(74),a(77),a(79);var n=a(0),s=a.n(n),o=a(31),i=a.n(o),l=a(12),c=a(19),u=a(66),p=a.n(u),d=a(14),m=a(5),h=a.n(m),f={login:{rut:"",password:"",err:""},newAccount:{name:"",surname:"",newRut:"",mail:"",age:"",newPassword:"",newPasswordVer:"",gender:"",interest:[],surnameSignature:"",err:""},roomSelector:{room:"",err:""},expA:{mainInput:"",err:""}},v={token:"",userID:""},g={userLogIn:!1,activeExpId:"",expPublicId:0,modals:{newAccount:!1}},E=a(26),w=a.n(E),y={parameters:{instructions:""},testId:"",wordId:"",actualWord:"",wordInputList:[],roundsComplete:0,roundId:"",wordOfRoundCount:0},x={parameters:{alphaExpIdSource:""},testId:"",extremesWords:[]},b=Object(c.c)({test:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"test":return t.payload;default:return e}},forms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"formInput":return h()(e,Object(d.a)({},t.payload.formId,Object(d.a)({},t.payload.inputId,{$set:t.payload.text})));case"formErr":return h()(e,Object(d.a)({},t.payload.formId,{err:{$set:t.payload.err}}));case"formClear":return h()(e,Object(d.a)({},t.payload.formId,{$set:f[t.payload.formId]}));case"userLogOut":return h()(e,{$set:f});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"loadToken":return h()(e,{token:{$set:t.payload}});case"loadUserID":return h()(e,{userID:{$set:t.payload}});case"userLogOut":return h()(e,{$set:v});default:return e}},application:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"loadToken":return h()(e,{userLogIn:{$set:!0}});case"modalCOntrol":return h()(e,{modals:Object(d.a)({},t.payload.modalId,{$set:t.payload.state})});case"expLoad":return h()(e,{activeExpId:{$set:t.payload._id},expPublicId:{$set:t.payload.expPublicId}});case"userLogOut":return h()(e,{$set:g});default:return e}},expAlpha:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"expLoadAlpha":return h()(e,{parameters:{$set:t.payload.parameters}});case"expALoadTest":return h()(e,{testId:{$set:t.payload}});case"expALoadWord":return h()(e,{actualWord:{$set:t.payload.word},wordId:{$set:t.payload._id}});case"expAAddWordList":return h()(e,{wordInputList:{$push:[t.payload]}});case"expaloadround":return h()(e,{roundId:{$set:t.payload}});case"expaclearwordlist":return h()(e,{wordInputList:{$set:[]}});case"expareducewordlist":return h()(e,{wordInputList:{$set:e.wordInputList.slice(t.payload.reduceIn)}});case"expaaddroundready":return h()(e,{roundsComplete:{$set:e.roundsComplete+1},wordOfRoundCount:{$set:0}});case"expaaddroundwordcount":return h()(e,{wordOfRoundCount:{$set:e.wordOfRoundCount+1}});case"expaeditwordincache":return h()(e,{wordInputList:{$apply:function(e){return w.a.map(e,function(e,a){return e.time===t.payload.time?{word:t.payload.word,time:e.time}:e})}}});case"userLogOut":return h()(e,{$set:y});default:return e}},expBeta:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"expLoadBeta":return h()(e,{parameters:{$set:t.payload.parameters}});case"expBloadTest":return h()(e,{testId:{$set:t.payload.testId}});case"expBExtremesWords":return h()(e,{extremesWords:{$set:t.payload.extremesWords}});default:return e}}}),C=a(15),I=a(2),k=a.n(I),N=a(4),O=a(7),S=a(8),A=a(10),B=a(9),R=a(11),j=a(16),P=a.n(j),M=a(13),T=a.n(M),L=a(71),W=a.n(L),D=function(e){return function(){var t=Object(N.a)(k.a.mark(function t(a){var r,n;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.getToken=!0,t.prev=1,t.next=4,T.a.post("/api/loginUser",e);case 4:return r=t.sent,n=W()(r.data.token),a({type:"loadToken",payload:r.data.token}),a({type:"loadUserID",payload:n.id}),t.abrupt("return",!0);case 11:return t.prev=11,t.t0=t.catch(1),a({type:"formErr",payload:{formId:"login",err:"Error en el login"}}),t.abrupt("return",!1);case 15:case"end":return t.stop()}},t,this,[[1,11]])}));return function(e){return t.apply(this,arguments)}}()},U=function(e){return function(){var t=Object(N.a)(k.a.mark(function t(a){var r,n;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=function(e){var t=e.trim(),a=t.replace(/\./g,"");return t=(a=a.replace("-","")).slice(0,-1)+"-"+a.slice(-1).toUpperCase()},n={name:e.name.trim().toLowerCase(),surname:e.surname.trim().toLowerCase(),rut:r(e.newRut),mail:e.mail.trim(),age:e.age.trim(),password:e.newPassword.trim(),gender:e.gender,interest:e.interest},t.prev=2,t.next=5,T.a.post("/api/createUser",n);case 5:return t.abrupt("return",!0);case 8:return t.prev=8,t.t0=t.catch(2),t.abrupt("return",!1);case 11:case"end":return t.stop()}},t,this,[[2,8]])}));return function(e){return t.apply(this,arguments)}}()},$=function(){return function(e){e({type:"userLogOut",payload:{}})}},V=function(e){return function(t){t({type:"formInput",payload:e})}},z=function(e){return function(t){t({type:"formErr",payload:e})}},H=function(e){return function(t){t({type:"formClear",payload:e})}},K=function(e){return function(t){t({type:"modalCOntrol",payload:e})}},_=function(e,t){return function(){var a=Object(N.a)(k.a.mark(function a(r){var n;return k.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,T.a.post("/api/loadRoom",e,{headers:{authorization:"Bearer "+t}});case 3:if(n=a.sent,r({type:"expLoad",payload:n.data}),1!==n.data.expPublicId){a.next=8;break}return r({type:"expLoadAlpha",payload:n.data}),a.abrupt("return",!0);case 8:if(2!==n.data.expPublicId){a.next=13;break}return r({type:"expLoadBeta",payload:n.data}),a.abrupt("return",!0);case 13:return console.log("Es un tipo de experimento que aun no tiene interfaz de usuario"),a.abrupt("return",!1);case 15:a.next=20;break;case 17:return a.prev=17,a.t0=a.catch(0),a.abrupt("return",!1);case 20:case"end":return a.stop()}},a,this,[[0,17]])}));return function(e){return a.apply(this,arguments)}}()},q=function(e,t){return function(){var a=Object(N.a)(k.a.mark(function a(r){var n;return k.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,T.a.post("/api/loadUserTest",e,{headers:{authorization:"Bearer "+t}});case 3:return n=a.sent,r({type:"expALoadTest",payload:n.data._id}),a.abrupt("return",!0);case 8:return a.prev=8,a.t0=a.catch(0),console.log(a.t0),a.abrupt("return",!1);case 12:case"end":return a.stop()}},a,this,[[0,8]])}));return function(e){return a.apply(this,arguments)}}()},F=function(e,t){return function(){var a=Object(N.a)(k.a.mark(function a(r){var n;return k.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,T.a.post("/api/loadNextWord",e,{headers:{authorization:"Bearer "+t}});case 3:return n=a.sent,r({type:"expALoadWord",payload:n.data.word}),a.abrupt("return",!0);case 8:return a.prev=8,a.t0=a.catch(0),console.log(a.t0),a.abrupt("return",!1);case 12:case"end":return a.stop()}},a,this,[[0,8]])}));return function(e){return a.apply(this,arguments)}}()},G=function(e,t){return function(){var a=Object(N.a)(k.a.mark(function a(r){var n;return k.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,T.a.post("/api/initRound",e,{headers:{authorization:"Bearer "+t}});case 3:return n=a.sent,r({type:"expaloadround",payload:n.data}),a.abrupt("return",!0);case 8:return a.prev=8,a.t0=a.catch(0),console.log(a.t0),a.abrupt("return",!1);case 12:case"end":return a.stop()}},a,this,[[0,8]])}));return function(e){return a.apply(this,arguments)}}()},Y=function(e){return function(t){return new Promise(function(a,r){t({type:"expAAddWordList",payload:e}),t({type:"expaaddroundwordcount",payload:{}}),a()})}},J=function(e,t){return function(){var a=Object(N.a)(k.a.mark(function a(r){return k.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,0!==e.wordList.length){a.next=3;break}return a.abrupt("return",!0);case 3:return a.next=5,T.a.post("/api/addWordToRelation",e,{headers:{authorization:"Bearer "+t}});case 5:return r({type:"expareducewordlist",payload:{reduceIn:5}}),a.abrupt("return",!0);case 9:return a.prev=9,a.t0=a.catch(0),console.log(a.t0),a.abrupt("return",!1);case 13:case"end":return a.stop()}},a,this,[[0,9]])}));return function(e){return a.apply(this,arguments)}}()},Q=function(e,t){return function(){var a=Object(N.a)(k.a.mark(function a(r){return k.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,T.a.post("/api/endRound",e,{headers:{authorization:"Bearer "+t}});case 3:return r({type:"expaaddroundready",payload:{}}),a.abrupt("return",!0);case 7:return a.prev=7,a.t0=a.catch(0),console.log(a.t0),a.abrupt("return",!1);case 11:case"end":return a.stop()}},a,this,[[0,7]])}));return function(e){return a.apply(this,arguments)}}()},X=function(){return function(e){return new Promise(function(t,a){e({type:"expaaddroundwordcount",payload:{}}),t()})}},Z=function(e,t){return function(){var a=Object(N.a)(k.a.mark(function a(r){return k.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,T.a.post("/api/addPause",e,{headers:{authorization:"Bearer "+t}});case 3:return a.abrupt("return",!0);case 6:return a.prev=6,a.t0=a.catch(0),console.log(a.t0),a.abrupt("return",!1);case 10:case"end":return a.stop()}},a,this,[[0,6]])}));return function(e){return a.apply(this,arguments)}}()},ee=function(e){return function(t){return new Promise(function(a,r){t({type:"expaeditwordincache",payload:e}),a()})}},te=function(e,t){return function(){var a=Object(N.a)(k.a.mark(function a(r){var n;return k.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,T.a.post("/api/loadUserTestBeta",e,{headers:{authorization:"Bearer "+t}});case 3:return n=a.sent,r({type:"expBloadTest",payload:{testId:n.data._id}}),a.abrupt("return",!0);case 8:return a.prev=8,a.t0=a.catch(0),console.log(a.t0),a.abrupt("return",!1);case 12:case"end":return a.stop()}},a,this,[[0,8]])}));return function(e){return a.apply(this,arguments)}}()},ae=function(e,t){return function(){var a=Object(N.a)(k.a.mark(function a(r){var n;return k.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,T.a.post("/api/loadExpBetaWords",e,{headers:{authorization:"Bearer "+t}});case 3:return n=a.sent,r({type:"expBExtremesWords",payload:{extremesWords:n.data}}),a.abrupt("return",!0);case 8:return a.prev=8,a.t0=a.catch(0),console.log(a.t0),a.abrupt("return",!1);case 12:case"end":return a.stop()}},a,this,[[0,8]])}));return function(e){return a.apply(this,arguments)}}()},re=function(e,t){return function(){var a=Object(N.a)(k.a.mark(function a(r){var n;return k.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,T.a.post("/api/saveWordsRelations",e,{headers:{authorization:"Bearer "+t}});case 3:return a.next=5,T.a.post("/api/loadExpBetaWords",{alphaExpSource:e.alphaExpSource,roomBetaNumber:e.roomBetaNumber},{headers:{authorization:"Bearer "+t}});case 5:return n=a.sent,r({type:"expBExtremesWords",payload:{extremesWords:n.data}}),a.abrupt("return",!0);case 10:return a.prev=10,a.t0=a.catch(0),console.log(a.t0),a.abrupt("return",!1);case 14:case"end":return a.stop()}},a,this,[[0,10]])}));return function(e){return a.apply(this,arguments)}}()},ne=a(21),se=a.n(ne),oe=function(e){function t(){var e,a;Object(O.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(A.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(n)))).state={nameInputClassName:"validate",surnameInputClassName:"validate",newRutInputClassName:"validate",mailInputClassName:"validate",ageInputClassName:"validate",newPasswordInputClassName:"validate",newPasswordVerInputClassName:"validate",surnameSignatureInputClassName:"validate",step:1,showProgressBar:!1},a}return Object(R.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.initializeSelect()}},{key:"componentDidUpdate",value:function(){this.initializeSelect()}},{key:"initializeSelect",value:function(){P()("#select").material_select()}},{key:"onCloseModal",value:function(){this.props.modalControl({modalId:"newAccount",state:!1}),this.setState({nameInputClassName:"validate",surnameInputClassName:"validate",newRutInputClassName:"validate",mailInputClassName:"validate",ageInputClassName:"validate",newPasswordInputClassName:"validate",newPasswordVerInputClassName:"validate",surnameSignatureInputClassName:"validate",step:1,showProgressBar:!1}),this.props.formClear({formId:"newAccount"})}},{key:"onChangeInput",value:function(e){this.props.formInput({formId:"newAccount",inputId:e,text:P()("#"+e).val()})}},{key:"onChangeRadioButton",value:function(e){this.props.formInput({formId:"newAccount",inputId:"gender",text:P()("#"+e).val()})}},{key:"validateExistenceAndLength",value:function(e,t,a,r){var n=e.trim();return""===n||n.length>a||n.length<=r||/\s/.test(n)?(this.setState(Object(d.a)({},t,"invalid")),this.props.formError({formId:"newAccount",err:"Faltan algunos de tus datos"}),!1):(this.setState(Object(d.a)({},t,"valid")),!0)}},{key:"validateRadioButton",value:function(){return""!==this.props.formData.gender||(this.props.formError({formId:"newAccount",err:"Tienes que seleccionar tu genero"}),!1)}},{key:"readSaveAndValidateSelect",value:function(){var e=P()("#select")[0].selectedOptions,t=[];if(e.length>0)for(var a=0;a<e.length;a++)"default"!==e[a].value&&t.push(e[a].value);return 0===t.length?(this.props.formError({formId:"newAccount",err:"Tienes que seleccionar tus intereses"}),!1):(this.props.formInput({formId:"newAccount",inputId:"interest",text:t}),!0)}},{key:"validateEmail",value:function(e){var t=e.trim();return!!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t)||(this.setState({mailInputClassName:"invalid"}),!1)}},{key:"validateRut",value:function(e){var t=e.trim(),a=t.replace(/\./g,""),r=(a=a.replace("-","")).slice(0,-1),n=a.slice(-1).toUpperCase();if(t=r+"-"+n,r.length<7)return this.props.formError({formId:"newAccount",err:"Rut no valido"}),this.setState({newRutInputClassName:"invalid"}),!1;for(var s=0,o=2,i=1;i<=r.length;i++){s+=o*a.charAt(r.length-i),o<7?o+=1:o=2}return 11-s%11!=(n=0==(n="K"==n?10:n)?11:n)?(this.props.formError({formId:"newAccount",err:"Rut no valido"}),this.setState({newRutInputClassName:"invalid"}),!1):(this.setState({newRutInputClassName:"valid"}),!0)}},{key:"validatePassword",value:function(e,t,a,r){var n=!1,s=e.trim();(""===s||s.length>=a||s.length<=r||/\s/.test(s))&&(this.setState({newPasswordInputClassName:"invalid"}),n=!0);var o=t.trim();return(""===o||o.length>=a||o.length<=r||/\s/.test(o))&&(this.setState({newPasswordVerInputClassName:"invalid"}),n=!0),!n&&(s!==o?(this.props.formError({formId:"newAccount",err:"Las contrase\xf1as estan mal verificadas"}),this.setState({newPasswordInputClassName:"invalid"}),this.setState({newPasswordVerInputClassName:"invalid"}),!1):(this.setState({newPasswordInputClassName:"valid"}),this.setState({newPasswordVerInputClassName:"valid"}),!0))}},{key:"validateAgeRange",value:function(e,t,a){return e>t&&e<a?(this.setState({ageInputClassName:"valid"}),!0):(this.setState({ageInputClassName:"invalid"}),!1)}},{key:"onClickNext",value:function(){var e=!0;e=!(!this.readSaveAndValidateSelect()||!e),e=!(!this.validateRadioButton()||!e),e=!(!this.validateExistenceAndLength(this.props.formData.name,"nameInputClassName",32,2)||!e),e=!(!this.validateExistenceAndLength(this.props.formData.surname,"surnameInputClassName",32,2)||!e),e=!(!this.validateExistenceAndLength(this.props.formData.age,"ageInputClassName",32,1)||!e),e=!(!this.validateAgeRange(this.props.formData.age,5,105)||!e),e=!(!this.validateRut(this.props.formData.newRut)||!e),e=!(!this.validateExistenceAndLength(this.props.formData.mail,"mailInputClassName",32,5)||!e),e=!(!this.validateEmail(this.props.formData.mail)||!e),(e=!(!this.validatePassword(this.props.formData.newPassword,this.props.formData.newPasswordVer,32,4)||!e))&&(this.props.formError({formId:"newAccount",err:""}),this.setState({step:2}))}},{key:"renderErr",value:function(){return""!==this.props.formData.err?s.a.createElement("div",{className:"row noMargin center-align red"},this.props.formData.err):s.a.createElement("div",null)}},{key:"validateSignatue",value:function(e,t){var a=e.trim();a=a.toLowerCase();var r=t.trim();return a===(r=r.toLowerCase())?(this.props.formError({formId:"newAccount",err:""}),this.setState({surnameSignatureInputClassName:"valid"}),!0):(this.props.formError({formId:"newAccount",err:"Esta mal firmado"}),this.setState({surnameSignatureInputClassName:"invalid"}),!1)}},{key:"processNewUser",value:function(){var e=Object(N.a)(k.a.mark(function e(){var t;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.validateSignatue(this.props.formData.surnameSignature,this.props.formData.surname)){e.next=7;break}return this.setState({showProgressBar:!0}),e.next=4,this.props.createNewUser(this.props.formData);case 4:t=e.sent,this.setState({showProgressBar:!1}),t?(this.props.formError({formId:"login",err:"Tu cuenta ya esta creada"}),this.onCloseModal()):this.props.formError({formId:"newAccount",err:"Error, puede ser que ya tengas una cuenta. Intenta otra vez"});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"renderProsgressBar",value:function(){var e=this;return this.state.showProgressBar?s.a.createElement("div",{className:"progress s6 offset-s3",style:{marginTop:"14px"}},s.a.createElement("div",{className:"indeterminate"})):s.a.createElement("div",{className:"row noMargin",style:{marginTop:"24px"}},s.a.createElement("div",{className:"col s6 center-align"},s.a.createElement("a",{onClick:function(){return e.onCloseModal()},className:"waves-effect btn-flat blue-grey lighten-2"},"Cancelar")),s.a.createElement("div",{className:"col s6 center-align"},s.a.createElement("a",{onClick:function(){return e.processNewUser()},className:"waves-effect btn light-green darken-4"},"Acepto las condiciones")))}},{key:"renderContent",value:function(){var e=this;return 1===this.state.step?s.a.createElement("div",null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col s6"},s.a.createElement("div",{className:"input-field"},s.a.createElement("input",{value:this.props.formData.name,onChange:function(){return e.onChangeInput("name")},id:"name",type:"text",className:this.state.nameInputClassName}),s.a.createElement("label",{htmlFor:"name"},"\xbfCual es tu nombre?"))),s.a.createElement("div",{className:"col s6"},s.a.createElement("div",{className:"input-field"},s.a.createElement("input",{value:this.props.formData.surname,onChange:function(){return e.onChangeInput("surname")},id:"surname",type:"text",className:this.state.surnameInputClassName}),s.a.createElement("label",{htmlFor:"surname"},"\xbfCual es tu apellido?"))),s.a.createElement("div",{className:"col s6"},s.a.createElement("div",{className:"input-field"},s.a.createElement("input",{value:this.props.formData.age,onChange:function(){return e.onChangeInput("age")},id:"age",type:"number",className:this.state.ageInputClassName}),s.a.createElement("label",{htmlFor:"age"},"\xbfCual es tu Edad?"))),s.a.createElement("div",{className:"col s6"},s.a.createElement("p",null,s.a.createElement("input",{name:"group1",value:"male",type:"radio",id:"radioGender1",onChange:function(){return e.onChangeRadioButton("radioGender1")}}),s.a.createElement("label",{htmlFor:"radioGender1",style:{marginRight:"25px"}},"Hombre"),s.a.createElement("input",{name:"group1",value:"female",type:"radio",id:"radioGender2",onChange:function(){return e.onChangeRadioButton("radioGender2")}}),s.a.createElement("label",{htmlFor:"radioGender2"},"Mujer"))),s.a.createElement("div",{className:"col s12"},s.a.createElement("div",{className:"input-field"},s.a.createElement("input",{value:this.props.formData.newRut,onChange:function(){return e.onChangeInput("newRut")},id:"newRut",type:"text",className:this.state.newRutInputClassName}),s.a.createElement("label",{htmlFor:"newRut"},"\xbfCual es tu Rut?"))),s.a.createElement("div",{className:"input-field col s6"},s.a.createElement("select",{id:"select",defaultValue:0===this.props.formData.interest.length?["default"]:this.props.formData.interest,multiple:!0},s.a.createElement("option",{value:"default",disabled:!0},"Puedes elegir mas de una !"),s.a.createElement("option",{value:"quimica_fisica"},"Qu\xedmica y F\xedsica"),s.a.createElement("option",{value:"negocios_administracion"},"Negocios y Administraci\xf3n"),s.a.createElement("option",{value:"informatica"},"Inform\xe1tica"),s.a.createElement("option",{value:"educacion"},"Educaci\xf3n"),s.a.createElement("option",{value:"ingenieria"},"Ingenier\xeda"),s.a.createElement("option",{value:"medio_ambiente"},"Medio ambiente"),s.a.createElement("option",{value:"historia_geografia"},"Historia y Geograf\xeda"),s.a.createElement("option",{value:"leyes"},"Leyes"),s.a.createElement("option",{value:"literatura"},"Literatura"),s.a.createElement("option",{value:"medicina"},"Medicina"),s.a.createElement("option",{value:"filosofia"},"Filosof\xeda"),s.a.createElement("option",{value:"estudios_religiosos"},"Estudios religiosos"),s.a.createElement("option",{value:"estadisticas"},"Estad\xedsticas"),s.a.createElement("option",{value:"agricultura"},"Agricultura"),s.a.createElement("option",{value:"humanidades_artes"},"Humanidades y Artes"),s.a.createElement("option",{value:"ciencias_sociales"},"Ciencias sociales"),s.a.createElement("option",{value:"arquitectura_dise\xf1o"},"Arquitectura y Dise\xf1o"),s.a.createElement("option",{value:"psicologia"},"Psicologia")),s.a.createElement("label",null,"\xbfCuales son tu areas de inter\xe9s?")),s.a.createElement("div",{className:"col s6"},s.a.createElement("div",{className:"input-field"},s.a.createElement("input",{value:this.props.formData.mail,onChange:function(){return e.onChangeInput("mail")},id:"mail",type:"text",className:this.state.mailInputClassName}),s.a.createElement("label",{htmlFor:"mail"},"\xbfCual es tu Mail?"))),s.a.createElement("div",{className:"col s12"},s.a.createElement("div",{className:"input-field"},s.a.createElement("input",{value:this.props.formData.newPassword,onChange:function(){return e.onChangeInput("newPassword")},id:"newPassword",type:"password",className:this.state.newPasswordInputClassName}),s.a.createElement("label",{htmlFor:"newPassword"},"Crea tu contrase\xf1a"))),s.a.createElement("div",{className:"col s12"},s.a.createElement("div",{className:"input-field"},s.a.createElement("input",{value:this.props.formData.newPasswordVer,onChange:function(){return e.onChangeInput("newPasswordVer")},id:"newPasswordVer",type:"password",className:this.state.newPasswordVerInputClassName}),s.a.createElement("label",{htmlFor:"newPasswordVer"},"Repite tu contrase\xf1a")))),this.renderErr(),s.a.createElement("div",{className:"divider row noMargin"}),s.a.createElement("div",{className:"row noMargin",style:{marginTop:"24px"}},s.a.createElement("div",{className:"col s6 center-align"},s.a.createElement("a",{onClick:function(){return e.onCloseModal()},className:"waves-effect btn-flat blue-grey lighten-2"},"Cancelar")),s.a.createElement("div",{className:"col s6 center-align"},s.a.createElement("a",{onClick:function(){return e.onClickNext()},className:"waves-effect btn light-green darken-4"},"Siguiente")))):2===this.state.step?s.a.createElement("div",null,s.a.createElement("div",{className:"row noMargin"},s.a.createElement("div",{className:"col s12 flow-text"},s.a.createElement("p",null,s.a.createElement("b",null,"Consentimiento Informado")),s.a.createElement("p",null,"Este experimento se enmarca en el proyecto de investigaci\xf3n \u201cCreatividad y Redes Sem\xe1nticas\u201d a cargo de la Dra. Alejandra Beghelli de la Universidad Adolfo Iba\xf1ez y el Dr. Pablo Prieto de la Universidad T\xe9cnica Federico Santa Mar\xeda."),s.a.createElement("p",null,"En este proyecto investigamos acerca de las caracter\xedsticas de las redes de asociaciones libres de las personas y su relaci\xf3n con la creatividad y la conexi\xf3n de conceptos."),s.a.createElement("p",null,"No hay riesgos asociados a su participaci\xf3n en este experimento.  La informaci\xf3n personal (nombre, rut, edad y sexo entre otros) ser\xe1 empleada exclusivamente para fines cient\xedficos, resguardando su privacidad y confidencialidad. "),s.a.createElement("p",null,s.a.createElement("b",null,"Al escribir su apellido al final del consentimiento Ud. da permiso  al equipo de investigaci\xf3n para analizar los datos que se recolecten durante el experimento.")," Toda la informaci\xf3n producida en esta investigaci\xf3n ser\xe1 tratada de manera confidencial. "),s.a.createElement("p",null,"Usted tiene la libertad de retirarse del experimento cuando lo desee. "),s.a.createElement("p",null,"Para obtener mayor informaci\xf3n sobre este estudio, puede contactarse con los investigadores: Alejandra Beghelli, ",s.a.createElement("b",null,"(56-32) 250-3824, alejandra.beghelli@uai.cl")," o Pablo Prieto, ",s.a.createElement("b",null,"(56-32) 2654-923, pablo.prieto@usm.cl. "))),s.a.createElement("div",{className:"col s12"},s.a.createElement("div",{className:"input-field"},s.a.createElement("input",{value:this.props.formData.surnameSignature,placeholder:"Escribe tu apellido para firmar las condiciones",onChange:function(){return e.onChangeInput("surnameSignature")},id:"surnameSignature",type:"text",className:this.state.surnameSignatureInputClassName})))),this.renderErr(),s.a.createElement("div",{className:"divider row noMargin"}),this.renderProsgressBar()):s.a.createElement("div",null)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(se.a,{open:this.props.modalState,showCloseIcon:!1,closeOnOverlayClick:!1,closeOnEsc:!1,onClose:function(){return e.onCloseModal()}},s.a.createElement("div",{className:"row noMargin"},s.a.createElement("h5",null,"Necesitamos algunos de tus datos")),this.renderContent()))}}]),t}(n.Component);var ie=Object(l.b)(function(e){return{modalState:e.application.modals.newAccount,formData:e.forms.newAccount}},r)(oe),le=function(e){function t(){var e,a;Object(O.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(A.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(n)))).state={rutInputClassName:"validate",passwordInputClassName:"validate",showProgressBar:!1},a}return Object(R.a)(t,e),Object(S.a)(t,[{key:"onChangeInput",value:function(e){this.props.formInput({formId:"login",inputId:e,text:P()("#"+e).val()})}},{key:"formatAndValidateRut",value:function(e){var t=e.trim(),a=t.replace(/\./g,""),r=(a=a.replace("-","")).slice(0,-1),n=a.slice(-1).toUpperCase();if(t=r+"-"+n,r.length<7)return this.props.formError({formId:"login",err:"Rut no valido"}),this.setState({rutInputClassName:"invalid"}),0;for(var s=0,o=2,i=1;i<=r.length;i++){s+=o*a.charAt(r.length-i),o<7?o+=1:o=2}return 11-s%11!=(n=0==(n="K"==n?10:n)?11:n)?(this.props.formError({formId:"login",err:"Rut no valido"}),this.setState({rutInputClassName:"invalid"}),0):t}},{key:"onClickLogin",value:function(){var e=Object(N.a)(k.a.mark(function e(){var t,a,r;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!0,t=!(!this.validateExistenceAndLength(this.props.formData.rut,"rutInputClassName",32,3)||!t),a=this.formatAndValidateRut(this.props.formData.rut),!(t=!(!this.validateExistenceAndLength(this.props.formData.password,"passwordInputClassName",32,3)||!t))||0===a){e.next=13;break}return this.setState({rutInputClassName:"valid"}),this.props.formError({formId:"login",err:""}),r={rut:a.trim(),password:this.props.formData.password.trim()},this.setState({showProgressBar:!0}),e.next=11,this.props.loginUser(r);case 11:e.sent||(this.setState({showProgressBar:!1}),this.setState({rutInputClassName:"invalid"}),this.setState({passwordInputClassName:"invalid"}));case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"validateExistenceAndLength",value:function(e,t,a,r){var n=e.trim();return""===n||n.length>a||n.length<=r||/\s/.test(n)?(this.setState(Object(d.a)({},t,"invalid")),!1):(this.setState(Object(d.a)({},t,"valid")),!0)}},{key:"renderProsgressBar",value:function(){var e=this;return this.state.showProgressBar?s.a.createElement("div",{className:"progress s6 offset-s3",style:{marginTop:"14px"}},s.a.createElement("div",{className:"indeterminate"})):s.a.createElement("div",{className:"row noMargin",style:{marginTop:"24px"}},s.a.createElement("div",{className:"col s6 center-align"},s.a.createElement("a",{onClick:function(){e.props.formClear({formId:"login"}),e.props.modalControl({modalId:"newAccount",state:!0})},className:"waves-effect btn-flat blue-grey lighten-2"},"Crear cuenta")),s.a.createElement("div",{className:"col s6 center-align"},s.a.createElement("a",{onClick:function(){return e.onClickLogin()},className:"waves-effect btn light-green darken-4"},"Entrar")))}},{key:"renderErr",value:function(){return""!==this.props.formData.err?s.a.createElement("div",{className:"row noMargin center-align"},this.props.formData.err):s.a.createElement("div",null)}},{key:"handleKeyPress",value:function(e){"Enter"===e.key&&this.onClickLogin()}},{key:"render",value:function(){var e=this;return this.props.application.userLogIn?s.a.createElement(C.b,{to:"/portal"}):s.a.createElement("div",null,s.a.createElement(ie,null),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col s6 offset-s3 center-align flow-text"},s.a.createElement("p",{style:{fontSize:"3rem"}},"Creativity UAI"))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col s10 l6 offset-s1 offset-l3"},s.a.createElement("div",{className:"card",style:{backgroundColor:"#f7f7f7"}},s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"input-field"},s.a.createElement("input",{autoFocus:!0,value:this.props.formData.rut,onKeyPress:function(t){return e.handleKeyPress(t)},onChange:function(){return e.onChangeInput("rut")},placeholder:"12345678-9",id:"rut",type:"text",className:this.state.rutInputClassName,ref:function(t){e.rutInput=t}}),s.a.createElement("label",{htmlFor:"rut"},"Rut")),s.a.createElement("div",{className:"input-field"},s.a.createElement("input",{value:this.props.formData.password,onKeyPress:function(t){return e.handleKeyPress(t)},onChange:function(){return e.onChangeInput("password")},id:"password",type:"password",className:this.state.passwordInputClassName}),s.a.createElement("label",{htmlFor:"password"},"Contrase\xf1a")),this.renderErr(),s.a.createElement("div",{className:"divider row noMargin"}),this.renderProsgressBar())))))}}]),t}(n.Component);var ce=Object(l.b)(function(e){return{formData:e.forms.login,userData:e.user,application:e.application}},r)(le),ue=function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(A.a)(this,Object(B.a)(t).call(this,e))).state={roomInputClassName:"validate",showProgressBar:!1},a._isMounted=!1,a}return Object(R.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"onChangeInput",value:function(e){this.props.formInput({formId:"roomSelector",inputId:e,text:P()("#"+e).val()})}},{key:"onClickEnterRoom",value:function(){var e=Object(N.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==this.props.formData.room){e.next=4;break}this.setState({roomInputClassName:"invalid"}),e.next=10;break;case 4:return this.setState({roomInputClassName:"valid"}),this.setState({showProgressBar:!0}),e.next=8,this.props.roomSelect({room:this.props.formData.room},this.props.user.token);case 8:!e.sent&&this._isMounted&&(this.setState({showProgressBar:!1}),this.setState({roomInputClassName:"invalid"}));case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"renderProsgressBar",value:function(){var e=this;return this.state.showProgressBar?s.a.createElement("div",{className:"progress s6 offset-s3",style:{marginTop:"14px"}},s.a.createElement("div",{className:"indeterminate"})):s.a.createElement("div",{className:"row noMargin",style:{marginTop:"24px"}},s.a.createElement("div",{className:"col s12 center-align"},s.a.createElement("a",{onClick:function(){return e.onClickEnterRoom()},className:"waves-effect btn light-green darken-4"},"Entrar a la sala")))}},{key:"handleKeyPress",value:function(e){"Enter"===e.key&&this.onClickEnterRoom()}},{key:"render",value:function(){var e=this;if(!this.props.application.userLogIn)return s.a.createElement(C.b,{to:"/"});if(0!==this.props.application.expPublicId){if(1===this.props.application.expPublicId)return s.a.createElement(C.b,{to:"/portal/alpha"});if(2===this.props.application.expPublicId)return s.a.createElement(C.b,{to:"/portal/beta"})}return s.a.createElement("div",{className:"row",style:{marginTop:"30px"}},s.a.createElement("div",{className:"col s10 l6 offset-s1 offset-l3"},s.a.createElement("div",{className:"card",style:{backgroundColor:"#f7f7f7"}},s.a.createElement("div",{className:"card-content"},s.a.createElement("span",{className:"card-title"},"Escribe el numero de tu sala"),s.a.createElement("div",{className:"input-field"},s.a.createElement("input",{autoFocus:!0,value:this.props.formData.room,onKeyPress:function(t){return e.handleKeyPress(t)},onChange:function(){return e.onChangeInput("room")},id:"room",type:"number",className:this.state.roomInputClassName,ref:function(t){e.roomInput=t}}),s.a.createElement("label",{htmlFor:"room"},"Sala")),s.a.createElement("div",{className:"divider row noMargin"}),this.renderProsgressBar()))))}}]),t}(n.Component);var pe=Object(l.b)(function(e){return{formData:e.forms.roomSelector,application:e.application,user:e.user}},r)(ue),de=function(e){function t(){var e,a;Object(O.a)(this,t);for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return(a=Object(A.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(n)))).state={page:1},a}return Object(R.a)(t,e),Object(S.a)(t,[{key:"onCloseModal",value:function(){this.props.onCloseModal()}},{key:"onClickNextButton",value:function(){this.setState({page:this.state.page+1})}},{key:"renderProgressBar",value:function(){return s.a.createElement("div",{className:"progress s6 offset-s3",style:{marginTop:"14px"}},s.a.createElement("div",{className:"indeterminate"}))}},{key:"rederNextButton",value:function(){var e=this;return s.a.createElement("div",{key:3,className:"col s12 center-align"},s.a.createElement("a",{onClick:function(){return e.onClickNextButton()},className:"waves-effect btn light-green darken-4"},"Realizar experimento"))}},{key:"renderButton",value:function(){var e=this;return s.a.createElement("div",{key:4,className:"col s12 center-align"},s.a.createElement("a",{onClick:function(){return e.onCloseModal()},className:"waves-effect btn light-green darken-4"},this.props.buttonText))}},{key:"renderContent",value:function(e){var t=[];return this.props.loadingMode?this.renderProgressBar():(1===e&&(t.push(s.a.createElement("div",{key:1,className:"col s12 flow-text"},s.a.createElement("p",null,s.a.createElement("b",null,"\xbfEn qu\xe9 consiste este experimento?")),s.a.createElement("p",null,"Este experimento consiste en recolectar todas las ",s.a.createElement("b",null,"asociaciones libres")," que se le ocurran al leer una determinada palabra."),s.a.createElement("p",null,"Una asociaci\xf3n libre es cualquier concepto o idea que se le venga a la cabeza espont\xe1neamente al leer la palabra. Por ejemplo, las asociaciones libres de la palabra PASTO son ",s.a.createElement("b",null,"todas las respuestas que se le ocurren a la pregunta")," \xbfQu\xe9 ideas se te vienen al cabeza con la palabra PASTO?"),s.a.createElement("p",null,"Ejemplo: Tus asociaciones libres de la palabra PASTO podr\xedan ser: JARD\xcdN, VERDE, CAMPO\u2026. Y muchas m\xe1s claro !"),s.a.createElement("p",null,"Dependiendo de la palabra, a uno se le pueden ocurrir pocas o muchas asociaciones libres. El objetivo en este experimento es que ",s.a.createElement("b",null,"escriba todas las asociaciones libres")," que espont\xe1neamente se le ocurran, sin l\xedmite de tiempo."))),t.push(this.rederNextButton())),2===e&&(t.push(s.a.createElement("div",{key:2,className:"col s12 flow-text"},s.a.createElement("p",null,s.a.createElement("b",null,"\xbfC\xf3mo uso el sistema?")),s.a.createElement("p",null,'A continuaci\xf3n el sistema le mostrar\xe1 una palabra y una casilla para escribir. En esa casilla escriba por favor su primera asociaci\xf3n libre y luego presione la telca "ENTER" de su teclado. Al presionar la tecla "ENTER", su asociaci\xf3n libre ser\xe1 guardada y aparecer\xe1 la casilla vac\xeda para que ingrese la siguiente asociaci\xf3n. '),s.a.createElement("p",null,'Cuando ya no se le ocurran m\xe1s asociaciones libres, presione el bot\xf3n "ESTOY SIN IDEAS" y luego en "PR\xd3XIMA PALABRA" para pasar a la siguiente palabra.'),s.a.createElement("p",null,'Cuando ya se encuentre cansad@ de ingresar asociaciones y desee terminar la sesi\xf3n de hoy, por favor presione "ESTOY SIN IDEAS" y luego "TERMINAR POR AHORA"'),s.a.createElement("p",null,"Muchas gracias por su participaci\xf3n en este experimento"))),t.push(this.renderButton())),s.a.createElement("div",null,t))}},{key:"render",value:function(){var e=this;return s.a.createElement(se.a,{open:this.props.isOpen,showCloseIcon:!1,closeOnOverlayClick:!1,closeOnEsc:!1,onClose:function(){return e.onCloseModal()},onExited:function(){return e.setState({page:1})}},s.a.createElement("div",{className:"row noMargin"},this.renderContent(this.state.page)))}}]),t}(n.Component);de.defaultProps={isOpen:!1,instructionsText:"default test",loadingMode:!1,buttonText:"salir"};var me=de,he=function(e){function t(){return Object(O.a)(this,t),Object(A.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(S.a)(t,[{key:"onCloseModal",value:function(e){this.props.onCloseModal(e)}},{key:"renderContent",value:function(){var e=this,t=[];return this.props.showNextRoundButton&&(t.push(s.a.createElement("div",{key:1,className:"col s6"},s.a.createElement("a",{onClick:function(){return e.onCloseModal("nextRound")},className:"waves-effect btn light-green darken-4"},"Pr\xf3xima palabra"))),this.props.showEndExpButton&&t.push(s.a.createElement("div",{key:2,className:"col s6"},s.a.createElement("a",{onClick:function(){return e.onCloseModal("endExp")},className:"waves-effect btn red darken-4"},"Terminar por ahora")))),t.length>0?s.a.createElement("div",{className:"col s12 center-align noMargin"},t):s.a.createElement("div",{className:"preloader-wrapper big active"},s.a.createElement("div",{className:"spinner-layer spinner-blue-only"},s.a.createElement("div",{className:"circle-clipper left"},s.a.createElement("div",{className:"circle"})),s.a.createElement("div",{className:"gap-patch"},s.a.createElement("div",{className:"circle"})),s.a.createElement("div",{className:"circle-clipper right"},s.a.createElement("div",{className:"circle"}))))}},{key:"render",value:function(){var e=this;return s.a.createElement(se.a,{open:this.props.isOpen,showCloseIcon:!1,closeOnOverlayClick:!1,closeOnEsc:!1,onClose:function(){return e.onCloseModal()}},s.a.createElement("div",{className:"row center-align noMargin",style:{whith:"800px"}},this.renderContent()))}}]),t}(n.Component);he.defaultProps={isOpen:!1,showNextRoundButton:!1,showEndExpButton:!1};var fe=he,ve=function(e){function t(){var e,a;Object(O.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(A.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(n)))).fixWordInput=s.a.createRef(),a.state={word:a.props.word,editMode:!1,wordTime:a.props.wordTime},a}return Object(R.a)(t,e),Object(S.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({word:e.word,editMode:!1,wordTime:e.wordTime})}},{key:"componentDidUpdate",value:function(){null!==this.fixWordInput.current&&this.fixWordInput.current.focus()}},{key:"onClickCorrect",value:function(){this.setState({editMode:!0})}},{key:"onClickEnd",value:function(){var e=Object(N.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({editMode:!1}),e.next=3,this.props.editWordInCache({word:this.state.word,time:this.state.wordTime});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onChangeInput",value:function(){this.setState({word:this.fixWordInput.current.value})}},{key:"renderButton",value:function(){var e=this;return this.state.editMode?s.a.createElement("a",{onClick:function(){return e.onClickEnd()},className:"waves-effect btn green"},"Terminar"):s.a.createElement("a",{onClick:function(){return e.onClickCorrect()},className:"waves-effect btn pink lighten-3"},"Corregir")}},{key:"renderWord",value:function(){var e=this;return this.state.editMode?s.a.createElement("div",{className:"input-field",style:{marginTop:"0px"}},s.a.createElement("input",{style:{marginBottom:"0px"},onChange:function(){return e.onChangeInput()},value:this.state.word,id:"fixWordInput",type:"text",ref:this.fixWordInput})):s.a.createElement("div",{style:{marginTop:"12px",fontWeight:"bold"}},this.state.word)}},{key:"render",value:function(){return s.a.createElement("div",{className:"row noMargin",style:{paddingTop:"3px"}},s.a.createElement("div",{className:"col s6 right-align"},this.renderWord()),s.a.createElement("div",{className:"col s6 left-align",style:{marginTop:"5px"}},this.renderButton()))}}]),t}(n.Component);var ge=Object(l.b)(function(e){return{}},r)(ve),Ee=function(e){function t(){return Object(O.a)(this,t),Object(A.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(S.a)(t,[{key:"renderWords",value:function(){return w.a.map(this.props.expAlpha.wordInputList.slice(this.props.expAlpha.wordInputList.length-3<0?0:this.props.expAlpha.wordInputList.length-3).reverse(),function(e,t){return s.a.createElement(ge,{key:t,wordTime:e.time,word:e.word})})}},{key:"render",value:function(){return s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col s8 offset-s2"},s.a.createElement("div",{className:"card",style:{backgroundColor:"#f7f7f7"}},s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"row"},"Lo ultimo que escribiste:"),s.a.createElement("div",{className:"row noMargin"},this.renderWords())))))}}]),t}(n.Component);var we=Object(l.b)(function(e){return{expAlpha:e.expAlpha}},r)(Ee),ye=function(e){function t(){var e,a;Object(O.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(A.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(n)))).wordInput=s.a.createRef(),a.state={showHelpModal:!1,loadingModeHelpModal:!0,textButtonHelpModal:"",timeInitPause:null,fristRound:!0,showEndRoundModal:!1,showNextRoundButtonEndRoundModal:!1,showEndExpButtonEndRoundModal:!1,errorOnTest:!1,enterKeyLocked:!1,nextWordButtonClass:"waves-effect btn orange lighten-1 disabled",displayCacheWordViewer:!0},a}return Object(R.a)(t,e),Object(S.a)(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){this.props.application.userLogIn&&""!==this.props.application.activeExpId?this.initialLoad():this.setState({errorOnTest:!0})}},{key:"componentWillReceiveProps",value:function(e){}},{key:"componentWillUpdate",value:function(e,t){}},{key:"componentDidUpdate",value:function(e,t){e.expAlpha.roundId!==this.props.expAlpha.roundId&&this.wordInput.current.focus()}},{key:"componentWillUnmount",value:function(){}},{key:"initialLoad",value:function(){var e=Object(N.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({showHelpModal:!0,loadingModeHelpModal:!0,textButtonHelpModal:"Entiendo, quiero comenzar !",fristRound:!0}),e.next=3,this.props.loadUserTest({experimentId:this.props.application.activeExpId},this.props.user.token);case 3:if(e.sent){e.next=7;break}return this.setState({errorOnTest:!0}),e.abrupt("return");case 7:return e.next=9,this.props.loadNewWord({testId:this.props.expAlpha.testId},this.props.user.token);case 9:if(e.sent){e.next=13;break}return this.setState({errorOnTest:!0}),e.abrupt("return");case 13:return this.setState({loadingModeHelpModal:!1}),e.abrupt("return");case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onCloseHelpModal",value:function(){var e=Object(N.a)(k.a.mark(function e(){var t;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({showHelpModal:!1}),!this.state.fristRound){e.next=6;break}this.initRound(),this.setState({fristRound:!1}),e.next=13;break;case 6:return t=new Date,e.next=9,this.props.sendPauseEvent({testId:this.props.expAlpha.testId,timeInit:this.state.timeInitPause.toISOString(),timeEnd:t.toISOString()},this.props.user.token);case 9:if(e.sent){e.next=13;break}return this.setState({errorOnTest:!0}),e.abrupt("return");case 13:this.wordInput.current.focus();case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"initRound",value:function(){var e=Object(N.a)(k.a.mark(function e(){var t;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,e.next=3,this.props.initRound({testId:this.props.expAlpha.testId,word:this.props.expAlpha.actualWord,time:t.toISOString()},this.props.user.token);case 3:if(e.sent){e.next=7;break}return this.setState({errorOnTest:!0}),e.abrupt("return");case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onChangeInput",value:function(e){this.props.formInput({formId:"expA",inputId:e,text:P()("#"+e).val()})}},{key:"handleKeyPress",value:function(){var e=Object(N.a)(k.a.mark(function e(t){var a,r,n,s;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"!==t.key||this.state.enterKeyLocked){e.next=32;break}for(this.setState({enterKeyLocked:!0}),a=new Date,"!@#$^&%*()+=-[]/{}|:<>?,.",r=this.props.formData.mainInput.trim(),n=0;n<"!@#$^&%*()+=-[]/{}|:<>?,.".length;n++)r=r.replace(new RegExp("\\"+"!@#$^&%*()+=-[]/{}|:<>?,."[n],"gi"),"");if(!(""===r||r.length<=1)){e.next=11;break}return this.props.formClear({formId:"expA"}),this.setState({enterKeyLocked:!1}),this.wordInput.current.focus(),e.abrupt("return");case 11:return r=(r=(r=(r=(r=(r=r.toLowerCase()).replace(/\xe1/gi,"a")).replace(/\xe9/gi,"e")).replace(/\xed/gi,"i")).replace(/\xf3/gi,"o")).replace(/\xfa/gi,"u"),e.next=19,this.props.addToWordList({word:r,time:a.toISOString()});case 19:if(!(this.props.expAlpha.wordInputList.length>=10)){e.next=28;break}return s=this.props.expAlpha.wordInputList.slice(0,5),e.next=23,this.props.sendWordList({wordList:s,roundId:this.props.expAlpha.roundId},this.props.user.token);case 23:if(e.sent){e.next=27;break}return this.setState({errorOnTest:!0}),e.abrupt("return");case 27:this.setState({enterKeyLocked:!1});case 28:this.props.expAlpha.wordOfRoundCount>=2&&this.setState({nextWordButtonClass:"waves-effect btn orange lighten-1"}),this.props.formClear({formId:"expA"}),this.setState({enterKeyLocked:!1}),this.wordInput.current.focus();case 32:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"onClickNextRound",value:function(){var e=Object(N.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.expAlpha.roundsComplete>=1&&this.setState({showEndExpButtonEndRoundModal:!0}),this.setState({enterKeyLocked:!0,nextWordButtonClass:"waves-effect btn orange lighten-1 disabled",showEndRoundModal:!0,showNextRoundButtonEndRoundModal:!1}),e.next=4,this.props.sendWordList({wordList:this.props.expAlpha.wordInputList,roundId:this.props.expAlpha.roundId},this.props.user.token);case 4:if(e.sent){e.next=8;break}return this.setState({errorOnTest:!0}),e.abrupt("return");case 8:return e.next=10,this.props.endRound({roundId:this.props.expAlpha.roundId,mainWordId:this.props.expAlpha.wordId,testId:this.props.expAlpha.testId},this.props.user.token);case 10:if(e.sent){e.next=14;break}return this.setState({errorOnTest:!0}),e.abrupt("return");case 14:return e.next=16,this.props.loadNewWord({testId:this.props.expAlpha.testId},this.props.user.token);case 16:if(e.sent){e.next=20;break}return this.setState({errorOnTest:!0}),e.abrupt("return");case 20:this.setState({showNextRoundButtonEndRoundModal:!0});case 21:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onCloseEndRoundModal",value:function(e){switch(e){case"nextRound":this.initRound(),this.setState({showEndRoundModal:!1,enterKeyLocked:!1});break;case"endExp":this.props.userLogOut(),this.setState({endExp:!0});break;default:this.setState({errorOnTest:!0})}}},{key:"onClickHelpButton",value:function(){var e=new Date;this.setState({showHelpModal:!0,loadingModeHelpModal:!1,textButtonHelpModal:"Estoy listo para continuar",fristRound:!1,timeInitPause:e})}},{key:"checkboxCacheWordViewer",value:function(e){this.setState({displayCacheWordViewer:e})}},{key:"renderCacheWordViewer",value:function(){return this.state.displayCacheWordViewer?s.a.createElement(we,null):s.a.createElement("div",null)}},{key:"render",value:function(){var e=this;return this.state.errorOnTest||this.state.endExp?s.a.createElement(C.b,{to:"/"}):s.a.createElement("div",null,s.a.createElement(me,{onCloseModal:function(){return e.onCloseHelpModal()},isOpen:this.state.showHelpModal,instructionsText:this.props.expAlpha.parameters.instructions,loadingMode:this.state.loadingModeHelpModal,buttonText:this.state.textButtonHelpModal}),s.a.createElement(fe,{showNextRoundButton:this.state.showNextRoundButtonEndRoundModal,isOpen:this.state.showEndRoundModal,onCloseModal:function(t){return e.onCloseEndRoundModal(t)},showEndExpButton:this.state.showEndExpButtonEndRoundModal}),s.a.createElement("div",{className:"row",style:{marginTop:"30px"}},s.a.createElement("div",{className:"col s12 center-align"},"\xbfQue relacionas con la siguiente palabra ?",s.a.createElement("h5",null,this.props.expAlpha.actualWord))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col s10 l6 offset-s1 offset-l3 center-align"},s.a.createElement("div",{className:"input-field"},s.a.createElement("input",{disabled:this.state.enterKeyLocked,ref:this.wordInput,value:this.props.formData.mainInput,onChange:function(){return e.onChangeInput("mainInput")},id:"mainInput",type:"text",onKeyPress:function(t){return e.handleKeyPress(t)}})),'Y click en "Enter" para enviar !')),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col s12 l6 offset-l3 center-align"},s.a.createElement("div",{className:"col s6 center-align"},s.a.createElement("a",{onClick:function(){return e.onClickNextRound()},className:this.state.nextWordButtonClass},"Pasar palabra")),s.a.createElement("div",{className:"col s6 center-align"},s.a.createElement("a",{onClick:function(){return e.onClickHelpButton()},className:"waves-effect btn blue"},"Ver instrucciones")))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col s12 l6 offset-l3 center-align"},s.a.createElement("div",{className:"col s12 center-align"},s.a.createElement("a",{onClick:function(){return e.onClickHelpButton()},className:"waves-effect btn blue-grey"},"Pausa"),s.a.createElement("a",{style:{display:"none"},onClick:function(){return e.handleKeyPress({key:"Enter"})},className:"waves-effect btn blue-grey"},"TEST")))),this.renderCacheWordViewer(),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col s12 l6 offset-l3 center-align"},s.a.createElement("div",{className:"switch"},s.a.createElement("div",null,"Corrector"),s.a.createElement("label",null,"Apagado",s.a.createElement("input",{defaultChecked:!0,type:"checkbox",onChange:function(t){return e.checkboxCacheWordViewer(t.target.checked)}}),s.a.createElement("span",{className:"lever"}),"Encendido")))))}}]),t}(n.Component);var xe=Object(l.b)(function(e){return{application:e.application,expAlpha:e.expAlpha,user:e.user,formData:e.forms.expA}},r)(ye),be=function(e){function t(){var e,a;Object(O.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(A.a)(this,(e=Object(B.a)(t)).call.apply(e,[this].concat(n)))).input=s.a.createRef(),a.state={input:"",inputClassName:"validate",lockButton:!1},a}return Object(R.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){this.input.current.focus()}},{key:"onChangeInput",value:function(e){this.setState({input:this[e].current.value})}},{key:"onClickReady",value:function(){var e=Object(N.a)(k.a.mark(function e(){var t;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==(t=this.processString(this.state.input,this.props.expBeta.extremesWords[0].word,this.props.expBeta.extremesWords[1].word))){e.next=5;break}this.setState({inputClassName:"invalid"}),e.next=12;break;case 5:return this.setState({inputClassName:"validate",lockButton:!0}),e.next=8,this.props.sendRelationWords({testId:this.props.expBeta.testId,roomBetaNumber:this.props.forms.roomSelector.room,alphaExpSource:this.props.expBeta.parameters.alphaExpIdSource,relations:t},this.props.user.token);case 8:e.sent||console.log("Error al enviar relaciones"),this.setState({lockButton:!1,input:""}),this.input.current.focus();case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"processString",value:function(e,t,a){var r=[],n=[],s=[];if("<"!==e[0]&&">"!==e[0]&&"="!==e[0])return-1;if("<"!==e[e.length-1]&&">"!==e[e.length-1]&&"="!==e[e.length-1])return-1;r=(r=e.split(/<|>|=/)).slice(1,r.length-1);for(var o=0;o<r.length;o++)if(r[o].length<=1)return-1;if(0===r.length)return-1;for(var i=0;i<e.length;i++)"<"===e.charAt(i)&&n.push("<"),">"===e.charAt(i)&&n.push(">"),"="===e.charAt(i)&&n.push("=");l(t,r[0],n[0]);for(o=0;o<r.length-1;o++)l(r[o],r[o+1],n[o+1]);return l(r[r.length-1],a,n[r.length]),s;function l(e,t,a){s.push({wordFrom:e,wordTo:t,relation:a})}}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"row",style:{marginTop:"30px"}},s.a.createElement("div",{className:"col s4 center-align"},this.props.expBeta.extremesWords[0].word),s.a.createElement("div",{className:"col s4 center-align"},s.a.createElement("input",{ref:this.input,value:this.state.input,onChange:function(){return e.onChangeInput("input")},type:"text",className:this.state.inputClassName})),s.a.createElement("div",{className:"col s4 center-align"},this.props.expBeta.extremesWords[1].word),s.a.createElement("div",{className:"col s12 center-align"},s.a.createElement("a",{onClick:function(){return e.onClickReady()},className:"waves-effect btn blue-grey",disabled:this.state.lockButton},"Listo")))}}]),t}(n.Component);var Ce=Object(l.b)(function(e){var t;return t={expBeta:e.expBeta,user:e.user},Object(d.a)(t,"expBeta",e.expBeta),Object(d.a)(t,"forms",e.forms),t},r)(be),Ie=function(e){function t(e){var a;return Object(O.a)(this,t),(a=Object(A.a)(this,Object(B.a)(t).call(this,e))).state={errorOnTest:!1},a._isMounted=!1,a}return Object(R.a)(t,e),Object(S.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"componentDidMount",value:function(){this._isMounted=!0,this.props.application.userLogIn&&""!==this.props.application.activeExpId?this.loadTest():this.setState({errorOnTest:!0})}},{key:"componentWillReceiveProps",value:function(e){e.expBeta.testId!==this.props.expBeta.testId&&this.loadWords(e)}},{key:"loadTest",value:function(){var e=Object(N.a)(k.a.mark(function e(){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.loadUserTestBeta({experimentId:this.props.application.activeExpId},this.props.user.token);case 2:if(e.sent||!this._isMounted){e.next=6;break}return this.setState({errorOnTest:!0}),e.abrupt("return");case 6:return e.abrupt("return");case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadWords",value:function(){var e=Object(N.a)(k.a.mark(function e(t){return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.loadExpBetaWords({alphaExpSource:this.props.expBeta.parameters.alphaExpIdSource,roomBetaNumber:this.props.forms.roomSelector.room},this.props.user.token);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.errorOnTest?s.a.createElement(C.b,{to:"/"}):this.props.expBeta.extremesWords.length>=2?s.a.createElement(Ce,null):s.a.createElement("div",null,"Cargando")}}]),t}(n.Component);var ke=Object(l.b)(function(e){return{application:e.application,user:e.user,expBeta:e.expBeta,forms:e.forms}},r)(Ie),Ne=function(){return s.a.createElement(C.a,null,s.a.createElement("div",null,s.a.createElement(C.c,{exact:!0,path:"/",component:ce}),s.a.createElement(C.c,{exact:!0,path:"/portal",component:pe}),s.a.createElement(C.c,{exact:!0,path:"/portal/alpha",component:xe}),s.a.createElement(C.c,{exact:!0,path:"/portal/beta",component:ke})))},Oe=Object(c.e)(b,{},Object(c.d)(Object(c.a)(p.a),window.devToolsExtension?window.devToolsExtension():function(e){return e}));i.a.render(s.a.createElement(l.a,{store:Oe},s.a.createElement(Ne,null)),document.querySelector("#root"))},73:function(e,t,a){e.exports=a(169)},79:function(e,t,a){}},[[73,2,1]]]);
//# sourceMappingURL=main.0fa615d1.chunk.js.map